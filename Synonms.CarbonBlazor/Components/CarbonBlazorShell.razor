@using Synonms.CarbonBlazor.Enumerations
<div class="cb-shell @CarbonBlazorThemeMapper.ToCssClass(Theme)">
    <CarbonBlazorHeader ProductName="@ProductName" ProductIconImagePath="@ProductIconImagePath" OnMenuClick="@(() => _sidebar.IsExpanded = !_sidebar.IsExpanded)" OnThemeChanged="@OnThemeChanged">
        <UserPanel>@UserPanel</UserPanel>
        <SwitcherPanel>@SwitcherPanel</SwitcherPanel>
    </CarbonBlazorHeader>
    <CarbonBlazorSidebar @ref="@_sidebar">
        @SideNav
    </CarbonBlazorSidebar>
    <main class="cb-main">
        @Body
    </main>
    <CarbonBlazorNotificationToastQueue></CarbonBlazorNotificationToastQueue>
</div>

@code {
    private CarbonBlazorSidebar _sidebar = null!;
    
    [Parameter]
    [EditorRequired]
    public string ProductName { get; set; } = string.Empty;
    
    [Parameter]
    [EditorRequired]
    public string ProductIconImagePath { get; set; } = string.Empty;

    [Parameter]
    [EditorRequired]
    public RenderFragment SideNav { get; set; } = null!;

    [Parameter]
    [EditorRequired]
    public RenderFragment UserPanel { get; set; } = null!;

    [Parameter]
    [EditorRequired]
    public RenderFragment SwitcherPanel { get; set; } = null!;

    [Parameter]
    [EditorRequired]
    public RenderFragment Body { get; set; } = null!;

    [Parameter]
    public CarbonBlazorTheme Theme { get; set; } = CarbonBlazorTheme.White;
    
    private void OnThemeChanged(CarbonBlazorTheme theme)
    {
        Theme = theme;
    }
}